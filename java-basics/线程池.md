### 正确的配置线程数
配置的线程数太小会使大量请求在队列中排队，cpu资源没有被充分利用。太大则会导致多个线程同时争夺cpu资源，导致大量上下文切换，增加执行时间。  

* CPU密集型任务：CPU核数+1，
比 CPU 核心数多出来的一个线程是为了防止线程偶发的缺页中断（线程要访问的页不在主存，需要操作系统将其调入主存后再进行访问），
或者其它原因导致的任务暂停而带来的影响。
一旦任务暂停，CPU 就会处于空闲状态，而在这种情况下多出来的一个线程就可以充分利用 CPU 的空闲时间。  

* I/O密集型任务：CPU核数*2，线程在处理 I/O 的时间段内不会占用 CPU 来处理，这时就可以将 CPU 交出给其它线程使用。
* 如果平时的业务不是上面两种极端情况，线程数 =CPU 核数*（1+线程等待时间/线程时间运行时间），并用根据实际的压测情况进行调整。
