### TCP与UDP区别
* TCP是面向连接的，UDP是面向无连接的  

什么是建立连接：所谓的建立连接，是为了在客户端和服务端维护连接，而建立一定的数据结构来维护双方交互的状态，用这样的数据结构来保证所谓的面向连接的特性。

* TCP提供可靠传输：通过+TCP+连接传输的数据，无差错、不丢失、不重复、并且按序到达。而UDP继承了IP包的特性，不保证不丢失，不保证按顺序到达。

* TCP是面向字节流的，发送的时候发的是一个流，没头没尾。UDP继承了IP的特性，基于数据报的，一个一个包发，一个一个包收。

* TCP是可以有拥塞控制的。它意识到包丢弃了或者网络的环境不好了，就会根据情况调整自己的行为，看看是不是发快了，要不要发慢点。
UD就不会，应用让我发，我就发，管它洪水滔天。

* TCP其实是一个有状态服务，里面精确地记着发送了没有，接收到没有，发送到哪个了，应该接收哪个了，错一点儿都不行。而UDP则是无状态服务。

### UDP包头
![image](https://github.com/islongfei/Blog/tree/master/images)  

### UDP三大特点
* **沟通简单**：不需要一肚子花花肠子（大量的数据结构、处理逻辑、包头字段）
* **轻信他人**：它不会建立连接，虽然有端口号，但是监听在这个地方，谁都可以传给他数据，他也可以传给任何人数据，甚至可以同时传给多个人数据。
* **愣头青，做事不懂权变**：不知道什么时候该坚持，什么时候该退让。它不会根据网络的情况进行发包的拥塞控制，无论网络丢包丢成啥样了，它该怎么发还怎么发。

### UDP应用场景
* **网页或者 APP 的访问** :原来的页面访问以及app访问是基于http协议的，而http又是基于tcp的，所以时延高。由于UDP需要资源少，时延低，处理速度快，
Googl提出的一种基于UDP改进的通信协议 **QUIC**(Quick UDP Internet Connections)，其目的是降低网络通信的延迟，提供更好的用户互动体验
。QUIC在应用层上，会自己实现快速连接建立、减少重传时延，自适应拥塞控。

* **流媒体的协议**：在直播应用场景中，实时性比较比较重要，宁可丢包，也不要卡顿的，如果必须要丢包，隔几个帧丢一个，其实看视频的人不会感知，
所以很多直播应用都基于UDP实现了自己的视频传输协议。  

* **实时游戏**：游戏有一个特点，就是实时性比较高。快一秒你干掉别人，慢一秒你被别人爆头。
通常采用自定义的可靠UDP协议，自定义重传策略，能够把丢包产生的延迟降到最低，尽量减少网络问题对游戏性造成的影响。

* **IoT 物联网**：一方面，物联网领域终端资源少，很可能只是个内存非常小的嵌入式系统，而维护TCP协议代价太大；
另一方面，物联网对实时性要求也很高，而TCP还是因为上面的那些原因导致时延大。
Google推出了物联网通信协议Thread，就是基于UDP协议的。

* **移动通信领域**：在4G网络里，移动流量上网的数据面对的协议GTP-U是基于UDP的。因为移动网络协议比较复杂，
而GTP协议本身就包含复杂的手机上线下线的通信协议。如果基于TCP，TCP的机制就显得非常多余，
